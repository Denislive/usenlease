{% extends 'base.html' %}

{% load static %}

{% block title %}EquiHub Home{% endblock %}

{% block content %}
<div class="grid-container">
    <!-- Shopping Cart Area Start -->
    <div class="shopping_cart_area mt-32">
        <div class="grid-container">
            <form action="#">
                <h3 style="background-color: #1c1c1c; margin-top: 1rem; padding: 10px 5px; color: white;">Cart Summary</h3>
                <div class="grid-x grid-margin-x">
                    <div class="cell small-12">
                        <div class="table_desc">
                            <div class="cart_page">
                                <div class="table-responsive">
                                    <table>
                                        <thead>
                                            <tr>
                                                <th class="product_remove">Delete</th>
                                                <th class="product_thumb">Image</th>
                                                <th class="product_name">Product</th>
                                                <th class="product-price">Price</th>
                                                <th class="product_quantity">Quantity</th>
                                                <th class="product_total">Total</th>
                                            </tr>
                                        </thead>
                                        <tbody>
                                            {% for item in cart_items %}
                                            <tr>
                                                <td class="product_remove">
                                                    <a href="{% url 'remove-from-cart' item.item.slug item.item.id %}">
                                                        <i class="bi bi-trash"></i>
                                                    </a>
                                                </td>
                                                <td class="product_thumb">
                                                    <a href="#"><img src="{{ item.item.image.get_absolute_url }}" alt=""></a>
                                                </td>
                                                <td class="product_name"><a href="#">{{ item.item.name }}</a></td>
                                                <td class="product-price">${{ item.item.hourly_rate }}</td>
                                                <td class="product_quantity">
                                                    <div class="quantity-wrapper" style="font-size: 1.5rem;">  
                                                        <a style="margin-right: 20px;" href="{% url 'remove-single-item-from-cart' item.item.slug item.item.id %}">
                                                            <i class="bi bi-dash" style="font-size: 2rem; color:red;"></i>
                                                        </a>
                                                        {{ item.quantity }}
                                                        <a style="margin-left: 20px;" href="{% url 'add-single-item-to-cart' item.item.slug item.item.id %}">
                                                            <i class="bi bi-plus" style="font-size: 2rem; color:#ffc107;"></i>
                                                        </a>
                                                    </div>
                                                </td>
                                                <td class="product_total">${{ item.get_total }}</td>
                                            </tr>
                                            {% endfor %}
                                        </tbody>
                                    </table>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>

                <!-- Coupon Code Area Start -->
                <div class="coupon_area mt-32">
                    <div class="grid-x grid-margin-x">
                        <div class="cell small-12 medium-6">
                            <div class="coupon_code">
                                <h3>Cart Totals</h3>
                                <div class="coupon_inner">
                                    <div class="cart_subtotal">
                                        <p>Subtotal</p>
                                        <p class="cart_amount">${{ total_price|floatformat:2 }}</p>
                                    </div>
                                    <div class="cart_subtotal">
                                        <p>Shipping</p>
                                        <p class="cart_amount"><span>Flat Rate:</span> $25.00</p>
                                    </div>
                                    <a href="#">Calculate Shipping</a>
                                    <div class="cart_subtotal">
                                        <p>Total</p>
                                        <p class="cart_amount">${% if total_price %} {{ total_price|add:25.00|floatformat:2 }} {% else %} {{ total_price }} {% endif %}</p> <!-- Total price with shipping -->
                                    </div>
                                    <div class="checkout_btn text-right">
                                        <a href="{% url 'checkout' %}" class="button alert">Proceed to Checkout</a>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
                <!-- Coupon Code Area End -->
            </form>
        </div>
    </div>
    <!-- Shopping Cart Area End -->
</div>
{% endblock content %}
